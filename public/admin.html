<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Secure Exam â€“ Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex, nofollow" />
  <link rel="stylesheet" href="/style.css" />

<style>
.modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;
justify-content:center;align-items:center;z-index:9999;}
.hidden{display:none;}
.modal-content{background:#fff;padding:20px;width:80%;max-height:90vh;
overflow-y:auto;border-radius:8px;animation:fade .3s;}
.close{float:right;font-size:22px;cursor:pointer;}
@keyframes fade{from{opacity:0}to{opacity:1}}
.correct{color:green;font-weight:bold;}
.wrong{color:red;font-weight:bold;}
.table-mini{width:100%;border-collapse:collapse;margin-top:10px}
.table-mini th,.table-mini td{border:1px solid #ddd;padding:6px;font-size:13px}
</style>

</head>

<body data-page="admin">

<div class="container">
  <h1>Admin Panel</h1>

  <!-- LOGIN -->
  <section id="adminLoginSection">
    <h3>Admin Login</h3>
    <label>Enter Password</label>
    <input type="password" id="adminPassword"/>
    <button id="adminLoginBtn" class="primary-btn">Login</button>
  </section>

  <!-- DASHBOARD -->
  <section id="adminPanelSection" class="hidden">
    <div style="display:flex;justify-content:space-between">
      <h2>Dashboard</h2>
      <button id="adminLogoutBtn" class="secondary-btn">Logout</button>
    </div>

    <div style="margin:15px 0;display:flex;gap:10px;">
      <button onclick="questionForm.scrollIntoView()" class="primary-btn">Add Question</button>
      <button onclick="questionsTable.scrollIntoView()" class="primary-btn">Questions</button>
      <button onclick="resultsTable.scrollIntoView()" class="primary-btn">Results</button>
    </div>

    <!-- ADD / EDIT -->
    <form id="questionForm">
      <input type="hidden" id="questionIndex"/>
      <input type="hidden" id="questionId"/>
      <label>Question</label>
      <textarea id="questionInput" required></textarea>

      <div class="field">
        <input type="text" id="optA" placeholder="Option A" required/>
        <input type="text" id="optB" placeholder="Option B" required/>
        <input type="text" id="optC" placeholder="Option C" required/>
        <input type="text" id="optD" placeholder="Option D" required/>
      </div>

      <label>Correct Answer (A/B/C/D)</label>
      <input type="text" id="correctOption" maxlength="1" required/>

      <button type="submit" class="primary-btn">Save</button>
      <button type="button" id="resetFormBtn" class="secondary-btn">Clear</button>
    </form>

    <hr><h2>Questions List</h2>
    <table id="questionsTable">
      <thead><tr><th>#</th><th>Question</th><th>Correct</th><th>Actions</th></tr></thead>
      <tbody></tbody>
    </table>

    <hr><h2>Results</h2>
    <table id="resultsTable">
      <thead>
        <tr>
          <th>#</th><th>Name</th><th>Email</th>
          <th>Score</th><th>%</th><th>Warnings</th>
          <th>Submitted</th><th>Details</th>
        </tr>
      </thead><tbody></tbody>
    </table>
  </section>
</div>

<!-- RESULT MODAL -->
<div id="resultModal" class="modal hidden">
  <div class="modal-content">
    <span id="closeModal" class="close">&times;</span>
    <h2>User Exam Details</h2>
    <div id="modalBody"></div>
  </div>
</div>

<!-- QUESTION VIEW MODAL -->
<div id="questionModal" class="modal hidden">
  <div class="modal-content">
    <span id="closeQModal" class="close">&times;</span>
    <h2>Question View</h2>
    <div id="qModalBody"></div>
  </div>
</div>

<script src="/main.js"></script>
<script>
//=============== MODAL FOR QUESTION DETAILS ===================
function showQuestionDetails(q){
  const modal=document.getElementById("questionModal");
  const body=document.getElementById("qModalBody");
  modal.classList.remove("hidden");
  body.innerHTML = `
    <p><b>ID:</b> ${q.id}</p>
    <p><b>Question:</b> ${q.question}</p>
    <ul>
      <li>A: ${q.options[0]}</li>
      <li>B: ${q.options[1]}</li>
      <li>C: ${q.options[2]}</li>
      <li>D: ${q.options[3]}</li>
    </ul>
    <p>Correct Answer: <b style="color:green">${q.correct}</b></p>
  `;
  document.getElementById("closeQModal").onclick=()=>modal.classList.add("hidden");
  window.onclick=(e)=>{if(e.target===modal)modal.classList.add("hidden")}
}

//================= RESULT MODAL EXISTING (NO CHANGE) =============
</script>
</body>
</html>
